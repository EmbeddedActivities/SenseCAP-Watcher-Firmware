// This file was generated by SquareLine Studio
// SquareLine Studio version: SquareLine Studio 1.3.4
// LVGL version: 8.3.6
// Project name: ai

#include "ui.h"
#include "ui_helpers.h"
#include "esp_log.h"
#include "esp_event.h"
#include "event_loops.h"
#include "data_defs.h"


static const char * TAG = "ui:event";
uint8_t g_iftasklist = 0;

///////////////////// VARIABLES ////////////////////
void start_anim_Animation(lv_obj_t * TargetObject, int delay);
void start_anim2_Animation(lv_obj_t * TargetObject, int delay);
void rec_task_Animation(lv_obj_t * TargetObject, int delay);
void text_pulse_Animation(lv_obj_t * TargetObject, int delay);
void gif_play_Animation(lv_obj_t * TargetObject, int delay);


// SCREEN: ui_seeed_studio
void ui_seeed_studio_screen_init(void);
void ui_event_seeed_studio(lv_event_t * e);
lv_obj_t * ui_seeed_studio;
lv_obj_t * ui_startlogo;


// SCREEN: ui_virtual
void ui_virtual_screen_init(void);
void ui_event_virtual(lv_event_t * e);
lv_obj_t * ui_virtual;


// SCREEN: ui_mainscreen
void ui_mainscreen_screen_init(void);
lv_obj_t * ui_mainscreen;
lv_obj_t * ui_mainpanel;
lv_obj_t * ui_mainlist;
lv_obj_t * ui_mainlp1;
void ui_event_mainbtn1(lv_event_t * e);
lv_obj_t * ui_mainbtn1;
lv_obj_t * ui_mainlp2;
void ui_event_mainbtn2(lv_event_t * e);
lv_obj_t * ui_mainbtn2;
lv_obj_t * ui_mainlp3;
void ui_event_mainbtn3(lv_event_t * e);
lv_obj_t * ui_mainbtn3;
lv_obj_t * ui_mainlp4;
void ui_event_mainbtn4(lv_event_t * e);
lv_obj_t * ui_mainbtn4;
lv_obj_t * ui_maincircle;
lv_obj_t * ui_maincontent;
lv_obj_t * ui_maintitle;
lv_obj_t * ui_maintime;
lv_obj_t * ui_mainwifi;
lv_obj_t * ui_mainby;


// SCREEN: ui_nocurrentT
void ui_nocurrentT_screen_init(void);
lv_obj_t * ui_nocurrentT;
lv_obj_t * ui_notasktext;
void ui_event_notaskbtn(lv_event_t * e);
lv_obj_t * ui_notaskbtn;
lv_obj_t * ui_notasklabel;


// SCREEN: ui_waitingtask
void ui_waitingtask_screen_init(void);
void ui_event_waitingtask(lv_event_t * e);
lv_obj_t * ui_waitingtask;
lv_obj_t * ui_waittext;
lv_obj_t * ui_waitspinner;


// SCREEN: ui_atask_down
void ui_atask_down_screen_init(void);
void ui_event_atask_down(lv_event_t * e);
lv_obj_t * ui_atask_down;
lv_obj_t * ui_ataskd_text;
lv_obj_t * ui_atask_arc2;
lv_obj_t * ui_atask_sec3;
lv_obj_t * ui_atask_sec2;
lv_obj_t * ui_atask_sec1;
lv_obj_t * ui_atask_press;


// SCREEN: ui_preview_detection
void ui_preview_detection_screen_init(void);
void ui_event_preview_detection(lv_event_t * e);
lv_obj_t * ui_preview_detection;
lv_obj_t * ui_predetp1;
void ui_event_predet1v(lv_event_t * e);
lv_obj_t * ui_predet1v;
lv_obj_t * ui_predet1vt;
void ui_event_predet1e(lv_event_t * e);
lv_obj_t * ui_predet1e;
lv_obj_t * ui_predet1et;
void ui_event_predet1c(lv_event_t * e);
lv_obj_t * ui_predet1c;
lv_obj_t * ui_predetp2;
void ui_event_predet2b(lv_event_t * e);
lv_obj_t * ui_predet2b;
lv_obj_t * ui_predet2bt;
void ui_event_predet2e(lv_event_t * e);
lv_obj_t * ui_predet2e;
lv_obj_t * ui_predet2et;
void ui_event_predet2c(lv_event_t * e);
lv_obj_t * ui_predet2c;
lv_obj_t * ui_predetp3;
void ui_event_predet3e(lv_event_t * e);
lv_obj_t * ui_predet3e;
lv_obj_t * ui_predet3et;
void ui_event_predet3c(lv_event_t * e);
lv_obj_t * ui_predet3c;
lv_obj_t * ui_previewp1;
lv_obj_t * ui_previewp2;


// SCREEN: ui_ltaskscreen
void ui_ltaskscreen_screen_init(void);
lv_obj_t * ui_ltaskscreen;
lv_obj_t * ui_menupanel;
lv_obj_t * ui_menulist;
lv_obj_t * ui_menulp1;
void ui_event_menubtn1(lv_event_t * e);
lv_obj_t * ui_menubtn1;
lv_obj_t * ui_menulp2;
void ui_event_menubtn2(lv_event_t * e);
lv_obj_t * ui_menubtn2;
lv_obj_t * ui_menulp3;
void ui_event_menubtn3(lv_event_t * e);
lv_obj_t * ui_menubtn3;
lv_obj_t * ui_menulp4;
void ui_event_menubtn4(lv_event_t * e);
lv_obj_t * ui_menubtn4;
lv_obj_t * ui_menucircle;
lv_obj_t * ui_menucontent;


// SCREEN: ui_ltask_view
void ui_ltask_view_screen_init(void);
void ui_event_ltask_view(lv_event_t * e);
lv_obj_t * ui_ltask_view;


// SCREEN: ui_ltask_back
void ui_ltask_back_screen_init(void);
lv_obj_t * ui_ltask_back;
void ui_event_ltaskbb1(lv_event_t * e);
lv_obj_t * ui_ltaskbb1;
lv_obj_t * ui_ltaskbb1t;
void ui_event_ltaskbb2(lv_event_t * e);
lv_obj_t * ui_ltaskbb2;


// SCREEN: ui_ha
void ui_ha_screen_init(void);
void ui_event_ha(lv_event_t * e);
lv_obj_t * ui_ha;
lv_obj_t * ui_TempTitle;
lv_obj_t * ui_RHTitle;
lv_obj_t * ui_TempVal;
lv_obj_t * ui_RHVal;
lv_obj_t * ui_TempSy;
lv_obj_t * ui_RHSy;
lv_obj_t * ui_hapanel1;
lv_obj_t * ui_habtn1t;
lv_obj_t * ui_habtn1;
lv_obj_t * ui_hapanel2;
lv_obj_t * ui_habtn2t;
lv_obj_t * ui_habtn2;


// SCREEN: ui_setting
void ui_setting_screen_init(void);
void ui_event_setting(lv_event_t * e);
lv_obj_t * ui_setting;
void ui_event____initial_actions0(lv_event_t * e);
lv_obj_t * ui____initial_actions0;
const lv_img_dsc_t * ui_imgset_apple[2] = {&ui_img_apple1_png, &ui_img_apple2_png};
const lv_img_dsc_t * ui_imgset_appled[3] = {&ui_img_appled1_png, &ui_img_appled2_png, &ui_img_appled3_png};
const lv_img_dsc_t * ui_imgset_back[2] = {&ui_img_back1_png, &ui_img_back2_png};
const lv_img_dsc_t * ui_imgset_battery_[5] = {&ui_img_battery_1_png, &ui_img_battery_2_png, &ui_img_battery_3_png, &ui_img_battery_4_png, &ui_img_battery_5_png};
const lv_img_dsc_t * ui_imgset_1589045901[1] = {&ui_img_1721754357};
const lv_img_dsc_t * ui_imgset_gesture_detection[6] = {&ui_img_gesture_detection1_png, &ui_img_gesture_detection2_png, &ui_img_gesture_detection3_png, &ui_img_gesture_detection4_png, &ui_img_gesture_detection5_png, &ui_img_gesture_detection6_png};
const lv_img_dsc_t * ui_imgset_gesture[2] = {&ui_img_gesture1_png, &ui_img_gesture2_png};
const lv_img_dsc_t * ui_imgset_728890732[1] = {&ui_img_2022210068};
const lv_img_dsc_t * ui_imgset_human[2] = {&ui_img_human1_png, &ui_img_human2_png};
const lv_img_dsc_t * ui_imgset_humand[4] = {&ui_img_humand1_png, &ui_img_humand2_png, &ui_img_humand3_png, &ui_img_humand4_png};
const lv_img_dsc_t * ui_imgset_202715445[1] = {&ui_img_19533631};
const lv_img_dsc_t * ui_imgset_314185985[1] = {&ui_img_457376777};
const lv_img_dsc_t * ui_imgset_virtual[6] = {&ui_img_virtual1_png, &ui_img_virtual2_png, &ui_img_virtual3_png, &ui_img_virtual4_png, &ui_img_virtual5_png, &ui_img_virtual6_png};
const lv_img_dsc_t * ui_imgset_wifi_[5] = {&ui_img_wifi_0_png, &ui_img_wifi_1_png, &ui_img_wifi_2_png, &ui_img_wifi_3_png, &ui_img_wifi_4_png};

///////////////////// TEST LVGL SETTINGS ////////////////////
#if LV_COLOR_DEPTH != 16
    #error "LV_COLOR_DEPTH should be 16bit to match SquareLine Studio's settings"
#endif
#if LV_COLOR_16_SWAP !=1
    #error "LV_COLOR_16_SWAP should be 1 to match SquareLine Studio's settings"
#endif

///////////////////// ANIMATIONS ////////////////////
void start_anim_Animation(lv_obj_t * TargetObject, int delay)
{
    ui_anim_user_data_t * PropertyAnimation_0_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_0_user_data->target = TargetObject;
    PropertyAnimation_0_user_data->val = -1;
    lv_anim_t PropertyAnimation_0;
    lv_anim_init(&PropertyAnimation_0);
    lv_anim_set_time(&PropertyAnimation_0, 600);
    lv_anim_set_user_data(&PropertyAnimation_0, PropertyAnimation_0_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_0, _ui_anim_callback_set_y);
    lv_anim_set_values(&PropertyAnimation_0, -200, 0);
    lv_anim_set_path_cb(&PropertyAnimation_0, lv_anim_path_overshoot);
    lv_anim_set_delay(&PropertyAnimation_0, delay + 0);
    lv_anim_set_deleted_cb(&PropertyAnimation_0, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_0, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_0, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_0, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_0, 0);
    lv_anim_set_early_apply(&PropertyAnimation_0, false);
    lv_anim_start(&PropertyAnimation_0);
    ui_anim_user_data_t * PropertyAnimation_1_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_1_user_data->target = TargetObject;
    PropertyAnimation_1_user_data->val = -1;
    lv_anim_t PropertyAnimation_1;
    lv_anim_init(&PropertyAnimation_1);
    lv_anim_set_time(&PropertyAnimation_1, 600);
    lv_anim_set_user_data(&PropertyAnimation_1, PropertyAnimation_1_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_1, _ui_anim_callback_set_opacity);
    lv_anim_set_values(&PropertyAnimation_1, 0, 255);
    lv_anim_set_path_cb(&PropertyAnimation_1, lv_anim_path_ease_in_out);
    lv_anim_set_delay(&PropertyAnimation_1, delay + 0);
    lv_anim_set_deleted_cb(&PropertyAnimation_1, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_1, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_1, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_1, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_1, 0);
    lv_anim_set_early_apply(&PropertyAnimation_1, false);
    lv_anim_start(&PropertyAnimation_1);

}
void start_anim2_Animation(lv_obj_t * TargetObject, int delay)
{
    ui_anim_user_data_t * PropertyAnimation_0_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_0_user_data->target = TargetObject;
    PropertyAnimation_0_user_data->val = -1;
    lv_anim_t PropertyAnimation_0;
    lv_anim_init(&PropertyAnimation_0);
    lv_anim_set_time(&PropertyAnimation_0, 1000);
    lv_anim_set_user_data(&PropertyAnimation_0, PropertyAnimation_0_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_0, _ui_anim_callback_set_opacity);
    lv_anim_set_values(&PropertyAnimation_0, 255, 0);
    lv_anim_set_path_cb(&PropertyAnimation_0, lv_anim_path_linear);
    lv_anim_set_delay(&PropertyAnimation_0, delay + 2000);
    lv_anim_set_deleted_cb(&PropertyAnimation_0, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_0, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_0, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_0, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_0, 0);
    lv_anim_set_early_apply(&PropertyAnimation_0, false);
    lv_anim_start(&PropertyAnimation_0);

}
void rec_task_Animation(lv_obj_t * TargetObject, int delay)
{
    ui_anim_user_data_t * PropertyAnimation_0_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_0_user_data->target = TargetObject;
    PropertyAnimation_0_user_data->val = -1;
    lv_anim_t PropertyAnimation_0;
    lv_anim_init(&PropertyAnimation_0);
    lv_anim_set_time(&PropertyAnimation_0, 400);
    lv_anim_set_user_data(&PropertyAnimation_0, PropertyAnimation_0_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_0, _ui_anim_callback_set_opacity);
    lv_anim_set_values(&PropertyAnimation_0, 0, 255);
    lv_anim_set_path_cb(&PropertyAnimation_0, lv_anim_path_ease_in_out);
    lv_anim_set_delay(&PropertyAnimation_0, delay + 0);
    lv_anim_set_deleted_cb(&PropertyAnimation_0, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_0, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_0, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_0, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_0, 0);
    lv_anim_set_early_apply(&PropertyAnimation_0, true);
    lv_anim_set_get_value_cb(&PropertyAnimation_0, &_ui_anim_callback_get_opacity);
    lv_anim_start(&PropertyAnimation_0);
    ui_anim_user_data_t * PropertyAnimation_1_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_1_user_data->target = TargetObject;
    PropertyAnimation_1_user_data->val = -1;
    lv_anim_t PropertyAnimation_1;
    lv_anim_init(&PropertyAnimation_1);
    lv_anim_set_time(&PropertyAnimation_1, 500);
    lv_anim_set_user_data(&PropertyAnimation_1, PropertyAnimation_1_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_1, _ui_anim_callback_set_x);
    lv_anim_set_values(&PropertyAnimation_1, -130, 0);
    lv_anim_set_path_cb(&PropertyAnimation_1, lv_anim_path_ease_out);
    lv_anim_set_delay(&PropertyAnimation_1, delay + 0);
    lv_anim_set_deleted_cb(&PropertyAnimation_1, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_1, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_1, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_1, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_1, 0);
    lv_anim_set_early_apply(&PropertyAnimation_1, false);
    lv_anim_start(&PropertyAnimation_1);
    ui_anim_user_data_t * PropertyAnimation_2_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_2_user_data->target = TargetObject;
    PropertyAnimation_2_user_data->val = -1;
    lv_anim_t PropertyAnimation_2;
    lv_anim_init(&PropertyAnimation_2);
    lv_anim_set_time(&PropertyAnimation_2, 500);
    lv_anim_set_user_data(&PropertyAnimation_2, PropertyAnimation_2_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_2, _ui_anim_callback_set_x);
    lv_anim_set_values(&PropertyAnimation_2, 0, 130);
    lv_anim_set_path_cb(&PropertyAnimation_2, lv_anim_path_ease_in);
    lv_anim_set_delay(&PropertyAnimation_2, delay + 600);
    lv_anim_set_deleted_cb(&PropertyAnimation_2, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_2, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_2, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_2, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_2, 0);
    lv_anim_set_early_apply(&PropertyAnimation_2, false);
    lv_anim_set_get_value_cb(&PropertyAnimation_2, &_ui_anim_callback_get_x);
    lv_anim_start(&PropertyAnimation_2);
    ui_anim_user_data_t * PropertyAnimation_3_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_3_user_data->target = TargetObject;
    PropertyAnimation_3_user_data->val = -1;
    lv_anim_t PropertyAnimation_3;
    lv_anim_init(&PropertyAnimation_3);
    lv_anim_set_time(&PropertyAnimation_3, 500);
    lv_anim_set_user_data(&PropertyAnimation_3, PropertyAnimation_3_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_3, _ui_anim_callback_set_opacity);
    lv_anim_set_values(&PropertyAnimation_3, 255, 0);
    lv_anim_set_path_cb(&PropertyAnimation_3, lv_anim_path_ease_in_out);
    lv_anim_set_delay(&PropertyAnimation_3, delay + 600);
    lv_anim_set_deleted_cb(&PropertyAnimation_3, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_3, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_3, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_3, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_3, 0);
    lv_anim_set_early_apply(&PropertyAnimation_3, true);
    lv_anim_set_get_value_cb(&PropertyAnimation_3, &_ui_anim_callback_get_opacity);
    lv_anim_start(&PropertyAnimation_3);

}
void text_pulse_Animation(lv_obj_t * TargetObject, int delay)
{
    ui_anim_user_data_t * PropertyAnimation_0_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_0_user_data->target = TargetObject;
    PropertyAnimation_0_user_data->val = -1;
    lv_anim_t PropertyAnimation_0;
    lv_anim_init(&PropertyAnimation_0);
    lv_anim_set_time(&PropertyAnimation_0, 250);
    lv_anim_set_user_data(&PropertyAnimation_0, PropertyAnimation_0_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_0, _ui_anim_callback_set_opacity);
    lv_anim_set_values(&PropertyAnimation_0, 0, 255);
    lv_anim_set_path_cb(&PropertyAnimation_0, lv_anim_path_linear);
    lv_anim_set_delay(&PropertyAnimation_0, delay + 0);
    lv_anim_set_deleted_cb(&PropertyAnimation_0, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_0, 250);
    lv_anim_set_playback_delay(&PropertyAnimation_0, 250);
    lv_anim_set_repeat_count(&PropertyAnimation_0, LV_ANIM_REPEAT_INFINITE);
    lv_anim_set_repeat_delay(&PropertyAnimation_0, 500);
    lv_anim_set_early_apply(&PropertyAnimation_0, true);
    lv_anim_start(&PropertyAnimation_0);
    ui_anim_user_data_t * PropertyAnimation_1_user_data = lv_mem_alloc(sizeof(ui_anim_user_data_t));
    PropertyAnimation_1_user_data->target = TargetObject;
    PropertyAnimation_1_user_data->val = -1;
    lv_anim_t PropertyAnimation_1;
    lv_anim_init(&PropertyAnimation_1);
    lv_anim_set_time(&PropertyAnimation_1, 0);
    lv_anim_set_user_data(&PropertyAnimation_1, PropertyAnimation_1_user_data);
    lv_anim_set_custom_exec_cb(&PropertyAnimation_1, _ui_anim_callback_set_x);
    lv_anim_set_values(&PropertyAnimation_1, -180, 0);
    lv_anim_set_path_cb(&PropertyAnimation_1, lv_anim_path_linear);
    lv_anim_set_delay(&PropertyAnimation_1, delay + 0);
    lv_anim_set_deleted_cb(&PropertyAnimation_1, _ui_anim_callback_free_user_data);
    lv_anim_set_playback_time(&PropertyAnimation_1, 0);
    lv_anim_set_playback_delay(&PropertyAnimation_1, 0);
    lv_anim_set_repeat_count(&PropertyAnimation_1, 0);
    lv_anim_set_repeat_delay(&PropertyAnimation_1, 0);
    lv_anim_set_early_apply(&PropertyAnimation_1, true);
    lv_anim_start(&PropertyAnimation_1);

}
void gif_play_Animation(lv_obj_t * TargetObject, int delay)
{

}

/////////////////////  ////////////////////
static int current_img_index = 0;
// 图片资源数组，包含所有图片的指针
lv_img_dsc_t * _virtual[] = {
    &ui_img_virtual1_png,
    &ui_img_virtual2_png,
    &ui_img_virtual3_png,
    &ui_img_virtual4_png,
    &ui_img_virtual5_png,
    &ui_img_virtual6_png
};

lv_img_dsc_t * _dethuman_1[] = {
    &ui_img_virtual1_png,
    &ui_img_virtual2_png,
};

lv_img_dsc_t * _dethuman_0[] = {
    &ui_img_virtual3_png,
    &ui_img_virtual4_png,
    &ui_img_virtual5_png,
    &ui_img_virtual6_png
};

// 图片数量
#define IMG_COUNT 6

static void virtual_timer_callback(lv_timer_t * timer) {
    // 更新当前图片索引
    current_img_index = (current_img_index + 1) % IMG_COUNT;
    // 获取当前图片的指针
    lv_img_dsc_t * current_img = _virtual[current_img_index];
    // 设置图片到对象ui_maincircle
    lv_obj_set_style_bg_img_src(ui_virtual, current_img, LV_PART_MAIN | LV_STATE_DEFAULT);
}

static void dethuman1_timer_callback(lv_timer_t * timer) {
    // 更新当前图片索引
    current_img_index = (current_img_index + 1) % 2;
    // 获取当前图片的指针
    lv_img_dsc_t * current_img = _dethuman_1[current_img_index];
    // 设置图片到对象ui_maincircle
    lv_obj_set_style_bg_img_src(ui_preview_detection, current_img, LV_PART_MAIN | LV_STATE_DEFAULT);
}

static void dethuamn0_timer_callback(lv_timer_t * timer) {
    // 更新当前图片索引
    current_img_index = (current_img_index + 1) % 4;
    // 获取当前图片的指针
    lv_img_dsc_t * current_img = _dethuman_0[current_img_index];
    // 设置图片到对象ui_maincircle
    lv_obj_set_style_bg_img_src(ui_preview_detection, current_img, LV_PART_MAIN | LV_STATE_DEFAULT);
}

// 声明一个函数来创建定时器
static void create_timer(uint8_t det_task) {
    // 停止并删除之前的定时器，如果存在的话
    if (g_timer != NULL) {
        lv_timer_del(g_timer);
        g_timer = NULL;
    }
	switch (det_task)
	{
	case 0:
    	g_timer = lv_timer_create(virtual_timer_callback, 500, NULL);
		break;
    case 1:
    	g_timer = lv_timer_create(dethuamn0_timer_callback, 500, NULL);
		break;
    case 2:
    	g_timer = lv_timer_create(dethuman1_timer_callback, 500, NULL);
		break;
    
	default:
		break;
	}    
}




///////////////////// FUNCTIONS ////////////////////
void ui_event_seeed_studio(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_SCREEN_LOADED) {
        _ui_screen_change(&ui_virtual, LV_SCR_LOAD_ANIM_FADE_ON, 100, 3000, &ui_virtual_screen_init);
    }
}
void ui_event_virtual(lv_event_t * e)
{
    create_timer(0);
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        lv_group_add_obj(g_main, ui_mainbtn1);
        lv_group_add_obj(g_main, ui_mainbtn2);
        lv_group_add_obj(g_main, ui_mainbtn3);
        lv_group_add_obj(g_main, ui_mainbtn4);
        _ui_screen_change(&ui_mainscreen, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_mainscreen_screen_init);
    }
}
void ui_event_mainbtn1(lv_event_t * e)
{
    lv_indev_t * indev = lv_indev_get_act();
    if(indev == NULL) return;
    lv_indev_type_t indev_type = lv_indev_get_type(indev);

    lv_event_code_t event_code = lv_event_get_code(e);
    if(event_code == LV_EVENT_CLICKED && indev_type == LV_INDEV_TYPE_ENCODER) {
        lv_group_remove_all_objs(g_main);
        lv_group_add_obj(g_main, ui_menubtn1);
        lv_group_add_obj(g_main, ui_menubtn2);
        lv_group_add_obj(g_main, ui_menubtn3);
        lv_group_add_obj(g_main, ui_menubtn4);

        _ui_screen_change(&ui_ltaskscreen, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_ltaskscreen_screen_init);
    }
    if(event_code == LV_EVENT_FOCUSED) {
        main1f_cb(e);
    }
}
void ui_event_mainbtn2(lv_event_t * e)
{
    lv_indev_t * indev = lv_indev_get_act();
    if(indev == NULL) return;
    lv_indev_type_t indev_type = lv_indev_get_type(indev);

    lv_event_code_t event_code = lv_event_get_code(e);
    if(event_code == LV_EVENT_CLICKED && indev_type == LV_INDEV_TYPE_ENCODER) {
        // check if there any task storage were in the flash
        if(g_iftasklist)
        {
            lv_group_remove_all_objs(g_main);
            lv_group_add_obj(g_main, ui_preview_detection);
            _ui_screen_change(&ui_preview_detection, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_preview_detection_screen_init);
        }
        else
        {
            lv_group_remove_all_objs(g_main);
            lv_group_add_obj(g_main, ui_notaskbtn);
            _ui_screen_change(&ui_nocurrentT, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_nocurrentT_screen_init);
        }
    }
    if(event_code == LV_EVENT_FOCUSED) {
        main2f_cb(e);
    }
}
void ui_event_mainbtn3(lv_event_t * e)
{
    lv_indev_t * indev = lv_indev_get_act();
    if(indev == NULL) return;
    lv_indev_type_t indev_type = lv_indev_get_type(indev);

    lv_event_code_t event_code = lv_event_get_code(e);
    if(event_code == LV_EVENT_CLICKED && indev_type == LV_INDEV_TYPE_ENCODER) {
        _ui_screen_change(&ui_ha, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_ha_screen_init);
    }
    if(event_code == LV_EVENT_FOCUSED) {
        main3f_cb(e);
    }
}
void ui_event_mainbtn4(lv_event_t * e)
{
    lv_indev_t * indev = lv_indev_get_act();
    if(indev == NULL) return;
    lv_indev_type_t indev_type = lv_indev_get_type(indev);

    lv_event_code_t event_code = lv_event_get_code(e);
    if(event_code == LV_EVENT_CLICKED && indev_type == LV_INDEV_TYPE_ENCODER) {
        _ui_screen_change(&ui_setting, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_setting_screen_init);
    }
    if(event_code == LV_EVENT_FOCUSED) {
        main4f_cb(e);
    }
}
void ui_event_notaskbtn(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        lv_group_remove_all_objs(g_main);
        _ui_screen_change(&ui_waitingtask, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_waitingtask_screen_init);
    }
}
void ui_event_waitingtask(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    // if(event_code == LV_EVENT_PRESSED) {
    //     waitT_cb(e);
    // }
    if(g_iftasklist)
    {
        waitT_cb(e);
    }
}
void ui_event_atask_down(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_SCREEN_LOAD_START) {
        rec_task_Animation(ui_atask_sec3, 1000);
        rec_task_Animation(ui_atask_sec2, 2000);
        rec_task_Animation(ui_atask_sec1, 3000);
        text_pulse_Animation(ui_atask_press, 4000);
    }
    if(event_code == LV_EVENT_CLICKED) {
        lv_group_remove_all_objs(g_main);
        lv_group_add_obj(g_main, ui_preview_detection);

        _ui_screen_change(&ui_preview_detection, LV_SCR_LOAD_ANIM_FADE_ON, 200, 0, &ui_preview_detection_screen_init);
    }
}
void ui_event_preview_detection(lv_event_t * e)
{
    create_timer(g_predet);
    lv_indev_t * indev = lv_indev_get_act();
    if(indev == NULL) return;
    lv_indev_type_t indev_type = lv_indev_get_type(indev);
    lv_event_code_t event_code = lv_event_get_code(e);
    if(event_code == LV_EVENT_CLICKED && indev_type == LV_INDEV_TYPE_ENCODER) {
        predet_cb(e);
    }
}
void ui_event_predet1v(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        predet1v_cb(e);
    }
}
void ui_event_predet1e(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        lv_obj_add_flag(ui_predetp1, LV_OBJ_FLAG_HIDDEN);
        lv_group_remove_all_objs(g_main);
        lv_group_add_obj(g_main, ui_mainbtn1);
        lv_group_add_obj(g_main, ui_mainbtn2);
        lv_group_add_obj(g_main, ui_mainbtn3);
        lv_group_add_obj(g_main, ui_mainbtn4);

        ESP_LOGI(TAG, "ui_event_predet1e");
        esp_event_post_to(view_event_handle, VIEW_EVENT_BASE, VIEW_EVENT_TASK_STOP, 
                                    NULL,  0, portMAX_DELAY);

        _ui_screen_change(&ui_mainscreen, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_mainscreen_screen_init);
    }
}
void ui_event_predet1c(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        predet1c_cb(e);
    }
}
void ui_event_predet2b(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        predet2b_cb(e);
    }
}
void ui_event_predet2e(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        lv_obj_add_flag(ui_predetp2, LV_OBJ_FLAG_HIDDEN);
        lv_obj_add_flag(ui_previewp2, LV_OBJ_FLAG_HIDDEN);
        lv_group_remove_all_objs(g_main);
        lv_group_add_obj(g_main, ui_mainbtn1);
        lv_group_add_obj(g_main, ui_mainbtn2);
        lv_group_add_obj(g_main, ui_mainbtn3);
        lv_group_add_obj(g_main, ui_mainbtn4);

        ESP_LOGI(TAG, "ui_event_predet2e");
        esp_event_post_to(view_event_handle, VIEW_EVENT_BASE, VIEW_EVENT_TASK_STOP, 
                                    NULL,  0, portMAX_DELAY);

        _ui_screen_change(&ui_mainscreen, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_mainscreen_screen_init);
    }
}
void ui_event_predet2c(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        predet2c_cb(e);
    }
}
void ui_event_predet3e(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        lv_group_remove_all_objs(g_main);
        lv_group_add_obj(g_main, ui_mainbtn1);
        lv_group_add_obj(g_main, ui_mainbtn2);
        lv_group_add_obj(g_main, ui_mainbtn3);
        lv_group_add_obj(g_main, ui_mainbtn4);
        esp_event_post_to(view_event_handle, VIEW_EVENT_BASE, VIEW_EVENT_ALARM_OFF, NULL, 0, portMAX_DELAY);
        esp_event_post_to(view_event_handle, VIEW_EVENT_BASE, VIEW_EVENT_TASK_STOP, 
                                    NULL,  0, portMAX_DELAY);

        _ui_screen_change(&ui_mainscreen, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_mainscreen_screen_init);
    }
}
void ui_event_predet3c(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        predet3c_cb(e);
    }
}

void ui_event_previewp1(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        previewp1_cb(e);
    }
}
void ui_event_previewp2(lv_event_t * e)
{
    lv_indev_t * indev = lv_indev_get_act();
    if(indev == NULL) return;
    lv_indev_type_t indev_type = lv_indev_get_type(indev);
    lv_event_code_t event_code = lv_event_get_code(e);
    if(event_code == LV_EVENT_CLICKED && indev_type == LV_INDEV_TYPE_ENCODER) {
        previewp2_cb(e);
    }
}

void ui_event_menubtn1(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_ltask_view, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_ltask_view_screen_init);
    }
    if(event_code == LV_EVENT_CLICKED) {
        menu1f_cb(e);
    }
}
void ui_event_menubtn2(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_ltask_view, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_ltask_view_screen_init);
    }
    if(event_code == LV_EVENT_FOCUSED) {
        menu2f_cb(e);
    }
}
void ui_event_menubtn3(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_ltask_view, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_ltask_view_screen_init);
    }
    if(event_code == LV_EVENT_FOCUSED) {
        menu3f_cb(e);
    }
}
void ui_event_menubtn4(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        lv_group_remove_all_objs(g_main);
        lv_group_add_obj(g_main, ui_mainbtn1);
        lv_group_add_obj(g_main, ui_mainbtn2);
        lv_group_add_obj(g_main, ui_mainbtn3);
        lv_group_add_obj(g_main, ui_mainbtn4);
        _ui_screen_change(&ui_mainscreen, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_mainscreen_screen_init);
    }
    if(event_code == LV_EVENT_FOCUSED) {
        menu4f_cb(e);
    }
}
void ui_event_ltask_view(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_ltask_back, LV_SCR_LOAD_ANIM_FADE_ON, 200, 0, &ui_ltask_back_screen_init);
    }
}
void ui_event_ltaskbb1(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_ltaskscreen, LV_SCR_LOAD_ANIM_FADE_ON, 200, 0, &ui_ltaskscreen_screen_init);
    }
}
void ui_event_ltaskbb2(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_ltask_view, LV_SCR_LOAD_ANIM_FADE_ON, 200, 0, &ui_ltask_view_screen_init);
    }
}
void ui_event_ha(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_mainscreen, LV_SCR_LOAD_ANIM_FADE_ON, 200, 0, &ui_mainscreen_screen_init);
    }
}
void ui_event_setting(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_CLICKED) {
        _ui_screen_change(&ui_mainscreen, LV_SCR_LOAD_ANIM_FADE_ON, 100, 0, &ui_mainscreen_screen_init);
    }
}
void ui_event____initial_actions0(lv_event_t * e)
{
    lv_event_code_t event_code = lv_event_get_code(e);
    lv_obj_t * target = lv_event_get_target(e);
    if(event_code == LV_EVENT_SCREEN_LOAD_START) {
        start_anim_Animation(ui_startlogo, 0);
    }
    if(event_code == LV_EVENT_SCREEN_LOAD_START) {
        start_anim2_Animation(ui_startlogo, 0);
    }
}

///////////////////// SCREENS ////////////////////

void ui_init(void)
{
    LV_EVENT_GET_COMP_CHILD = lv_event_register_id();

    lv_disp_t * dispp = lv_disp_get_default();
    lv_theme_t * theme = lv_theme_default_init(dispp, lv_palette_main(LV_PALETTE_BLUE), lv_palette_main(LV_PALETTE_RED),
                                               false, LV_FONT_DEFAULT);
    lv_disp_set_theme(dispp, theme);
    ui_seeed_studio_screen_init();
    ui_virtual_screen_init();
    ui_mainscreen_screen_init();
    ui_nocurrentT_screen_init();
    ui_waitingtask_screen_init();
    ui_atask_down_screen_init();
    ui_preview_detection_screen_init();
    ui_ltaskscreen_screen_init();
    ui_ltask_view_screen_init();
    ui_ltask_back_screen_init();
    ui_ha_screen_init();
    ui_setting_screen_init();
    ui____initial_actions0 = lv_obj_create(NULL);
    lv_obj_add_event_cb(ui____initial_actions0, ui_event____initial_actions0, LV_EVENT_ALL, NULL);

    lv_disp_load_scr(ui____initial_actions0);
    lv_disp_load_scr(ui_seeed_studio);
}
